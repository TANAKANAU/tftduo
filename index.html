<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TFTDUO 直結モード</title>
  <style>
    :root{ --bg:#0f1216; --card:#151a20; --text:#e8eef6; --muted:#a8b3c4; --accent:#ff4da6; --accent-2:#8a5cff; }
    html,body{height:100%}
    body{ margin:0; background:radial-gradient(1200px 800px at 20% -10%, #1b2230 0%, #0f1216 60%) no-repeat,
          linear-gradient(135deg, rgba(255,77,166,.08), rgba(138,92,255,.06));
          color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", sans-serif;
          display:grid; place-items:center; }
    .wrap{width:min(720px,92vw); padding:24px}
    .card{ background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:32px 28px;
           box-shadow:0 10px 30px rgba(0,0,0,.35); display:grid; gap:18px; text-align:center; }
    h1{margin:0; font-size:28px; letter-spacing:.04em}
    .sub{color:var(--muted); font-size:14px; margin-top:-8px}
    .btn{appearance:none; border:0; cursor:pointer; padding:14px 22px; font-weight:700; font-size:16px; border-radius:12px;
         color:white; background:linear-gradient(135deg,var(--accent),var(--accent-2));
         transition:transform .08s ease, filter .15s ease, box-shadow .15s ease; box-shadow:0 8px 20px rgba(138,92,255,.25);
         width:260px; justify-self:center;}
    .btn:hover{filter:brightness(1.05)} .btn:active{transform:translateY(1px)}
    .muted{color:var(--muted); font-size:12px}
    .err{color:#ff6b6b; font-size:12px; min-height:1.2em}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>TFTDUO 通話テスト</h1>
      <p class="sub">緊急直結モード：ボタンで即入室。最初の2名が同じ部屋で接続されます。</p>

      <button id="joinBtn" class="btn">通話を開始（直結）</button>
      <div id="status" class="muted"></div>
      <div id="error"  class="err"></div>

      <div class="muted">
        <div><strong>注意:</strong> 初期設定はカメラOFFですが、自動起動する場合があります。ご注意ください。</div>
        <div>Daily管理: <a href="https://tftduo.daily.co/" target="_blank" rel="noopener">https://tftduo.daily.co/</a></div>
      </div>
    </div>
  </div>

  <script>
    // ボタンのクリックだけでDailyの固定ルームへ遷移
    (function(){
      const DAILY_SUBDOMAIN = "tftduo";
      const FIXED_ROOM = "room01"; // 必要に応じて他の固定部屋に変更
      const btn = document.getElementById('joinBtn');
      const statusEl = document.getElementById('status');
      const errorEl  = document.getElementById('error');

      window.addEventListener('error', e => errorEl.textContent = `ERR: ${e.message}`);
      window.addEventListener('unhandledrejection', e => errorEl.textContent = `REJ: ${e.reason?.message || e.reason}`);

      btn.addEventListener('click', () => {
        try{
          btn.disabled = true;
          statusEl.textContent = "入室中…";
          const url = `https://${DAILY_SUBDOMAIN}.daily.co/${FIXED_ROOM}`;
          // 即遷移
          window.location.assign(url);
        }catch(e){
          btn.disabled = false;
          errorEl.textContent = e.message || "遷移エラー";
        }
      });
    })();
  </script>
</body>
</html>
